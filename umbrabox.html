<!DOCTYPE html>

<html>
<head>
  <meta charset="utf-8" />
  <title>Привет</title>
  <script src="jquery-1.9.1.min.js"></script>
  <script>
  function getUrlVars() {
    var vars = {};
    var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m,key,value) {
        vars[key] = value;
    });
    return vars;
}
function getUrlParam(parameter, defaultvalue){
    var urlparameter = defaultvalue;
    if(window.location.href.indexOf(parameter) > -1){
        urlparameter = getUrlVars()[parameter];
        }
    return urlparameter;
}
</script>
  <style>
  @font-face { font-family: SFUI; src: url('SFUIb.ttf'); }
    body {font-family: "SFUI"; text-align:  center; background-color: black; background-size: 100%; margin: 0px; overflow:hidden;}
    h1 {font-size:2em; text-decoration: none; position: relative;}
    h2 {font-size:1em; color: #ffffff;  text-shadow: black 0px 0px 14px;}
    h3 {font-size:1.5em; color: #ffffff;  text-shadow: black 0px 0px 14px; position: relative; top: 50px; right: 1.5%;}
}
body, html {
  height: 100%;
  margin: 0;
}
#back div {
  position: absolute; 
  top: 0; 
  left: 0;
  width: 100%; 
  height: 100%;
  
}

#back div:first-child {
    display:block;
}

.bg1 {
	background-image: url("1u.jpg");
	height: 100%;
	background-position: center;
	background-repeat: no-repeat;
	background-size: cover;
}
.bg2 {
	background-image: url("2u.jpg");
	height: 100%;
	background-position: center;
	background-repeat: no-repeat;
	background-size: cover;
}
.bg3 {
	background-image: url("3u.jpg");
	height: 100%;
	background-position: center;
	background-repeat: no-repeat;
	background-size: cover;
}
.bg4 {
	background-image: url("4u.jpg");
	height: 100%;
	background-position: center;
	background-repeat: no-repeat;
	background-size: cover;
}
</style>
</head>
<body>
<div id="back">
    <div class="bg1"></div>
    <div class="bg2" style="display: none;"></div>
    <div class="bg3" style="display: none;" ></div>
    <div class="bg4" style="display: none;" ></div>
</div>
<script>
	function Divs() {
        var divs= $('#back div'),
            now = divs.filter(':visible'),
            next = now.next().length ? now.next() : divs.first(),
            speed = 2000;
        if (now.next().length == 0)
		{
		next.fadeIn(1);
		now.fadeOut(speed);
		}
		else
		{
		next.fadeIn(speed);
        setTimeout(() => now.fadeOut(1),3000);
		}
    }
    
    $(function () {
        setInterval(Divs, 6000);
    });

</script>
<div id="maintext" style="position: fixed; top: 7%; left: 50%; transform: translateX(-50%);">
	<div id="logo">
		<img src="serverumbra.jpg" width=22% height=22% onclick="window.location.href='http://twitter.com/appleveg'" style="border-radius: 50%; box-shadow: black 0px 0px 25px;">
		<h1><a href="http://twitter.com/appleveg" style="color: #ffffff; text-decoration: none; text-shadow: black 0px 0px 25px;">UmbraBox</a></h1>
	</div>
	<div id="description">
		<h2>Вышел из тени чтобы сражаться... Кто же это может быть? - UmbraBox!</h2>
		<h2>Большая карта - есть много места для ваших безумных идей!</h2>
		<h2>Техника - по большой карте надо как-то передвигаться...</h2>
		<h2>Множество оружия - если возникнут разногласия, вы знаете как это решить.</h2>
		<h2>Принтеры - на большой карте крутятся большие деньги, станьте миллионером!</h2>
		<h2>И всё это вас ждёт тут, на уютном сервере UmbraBox!</h2>
		<h2 id="helloid"></h2>
	</div>
</div>
<div id="loading" style="position: fixed; top: 80%; left: 50%; transform: translateX(-50%);">
	<img src="load.gif" width=10% height=10% style="border-radius: 50%;">
	<h2 id="downloadingid">Загрузка...</h2>
</div>

<script>
 
var mapname = getUrlParam("mapname", "no_info");
var steamid = getUrlParam("steamid", "no_info");
var filestotal = 0;
var curfile = "";
var statuss;
var filesleft = 0;
var connected = false;
document.getElementById("helloid").innerHTML = "Карта на сервере - "+mapname;

function SetStatus() 
{
	if (!connected){
	
	document.getElementById("downloadingid").innerHTML = "Загрузка - "+curfile+" - "+filesleft+" из "+filestotal
	
	}
	else
	{
		document.getElementById("downloadingid").innerHTML = "Вот-вот загрузится..."
	}
}
function SetFilesTotal( num ) 
{
	filestotal = num;
	SetStatus() 
}
function SetFilesNeeded( fileName ) 
{
	filesleft = fileName;
	SetStatus() 
}
function DownloadingFile( fileName ) 
{
	curfile = fileName;
	SetStatus() 
}
function SetStatusChanged( status ) 
{
	if (status.toLowerCase().includes("starting lua"))
	{
		connected = true;
		SetStatus() 
	}
}

</script>
<div id="player"></div>
<audio autoplay loop>
	<source src="music.ogg" type="audio/ogg" id="nochrome">
</audio>
<script>
var isChrome = /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor);
  if(!isChrome){
    $('#player').remove()
  }
else
{
	$('#nochrome').remove()
      // 2. This code loads the IFrame Player API code asynchronously.
      var tag = document.createElement('script');
      tag.src = "https://www.youtube.com/iframe_api";
      var firstScriptTag = document.getElementsByTagName('script')[0];
      firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
      // 3. This function creates an <iframe> (and YouTube player)
      //    after the API code downloads.
      var player;
      function onYouTubeIframeAPIReady() {
        player = new YT.Player('player', {
          height: '0',
          width: '0',
          videoId: '0J2QdDbelmY',
		  playerVars: { 'autoplay': 1, 'loop': 1 },
          events: {
            'onReady': onPlayerReady,
            'onStateChange': onPlayerStateChange
          }
        });
      }
	  //<iframe id="lolyjop" width="0" height="0" src="https://www.youtube.com/embed/0J2QdDbelmY?rel=0&autoplay=1&loop=1" frameborder="0" style="width:0px; height:0px;"></iframe>
      // 4. The API will call this function when the video player is ready.
      function onPlayerReady(event) {
           event.target.setVolume(20);
       event.target.playVideo();
      }
      // 5. The API calls this function when the player's state changes.
      //    The function indicates that when playing a video (state=1),
      //    the player should play for six seconds and then stop.
      var done = false;
      function onPlayerStateChange(event) {
        if (event.data == YT.PlayerState.PLAYING && !done) {
    //      setTimeout(stopVideo, 6000);
                  done = false;
        }
           event.target.setVolume(20);
      }
}
</script>
</body>
</html>

